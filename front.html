<html>
<head>
<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-114379663-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

<style class="embedly-css">
.art-bd-img{
	object-fit:cover;
	width:300px; 
	max-height:320px;
}

.reddit-self{
	text-overflow:ellipsis;
	overflow:hidden;
	width:100%; 
	max-height:320px
}

div.embedly-card{
	display:inline-block;
	vertical-align:top;
}

.header{
	text-align:center;
	font: 40px "Trebuchet MS", Helvetica, sans-serif;
	color:dimgrey;
	margin:auto;
}

p {
	font-family:calibri;
	font-style:bold;
	margin:auto;
}
</style>

<script async src="https://embed.redditmedia.com/widgets/platform.js" charset="UTF-8"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript">

	var date = new Date();
	var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
	
	jsonData = $.ajax({
		url: "https://polandballdb.github.io/data/date_ids.json",
		dataType: "json",
		async: false
		}).responseJSON;
		
	for (var y in jsonData){
		for (var m = 1; m < 13; m++) {
			if (jsonData[y][m] === undefined){
				jsonData[y][m] = {};
			}
		}
	}
			
	function init(){
		document.getElementById("month").value = date.getMonth()+1;
		document.getElementById("day").value = date.getDate();
		
		main();
	}
	
	
	function main() {
			
		var month = Number(document.getElementById("month").value);
		var day = Number(document.getElementById("day").value);
		
		document.getElementById("title").innerHTML = 'r/polandball - ' +months[month-1] +' ' + day;
		
		for (var year in jsonData){
			if (year != 2019) {
				document.getElementById(year).innerHTML = '';
				var comics = jsonData[year][month][day];
				if (comics !== undefined) {		
					for (var i = 0; i < comics.length; i++) {
						var id = comics[i];
						
						/*
						var bq = document.createElement("BLOCKQUOTE");
						bq.setAttribute("class","reddit-card");
						bq.setAttribute("data-card-width","320px");
						bq.setAttribute("data-card-preview","1");
						
						var embed = document.createElement("A");
						embed.setAttribute("href","https://www.reddit.com/r/polandball/comments/"+id+"/");
						
						bq.appendChild(embed);
						document.getElementById(year.toString()).appendChild(bq);
						*/
						document.getElementById(year.toString()).innerHTML += '<blockquote class="reddit-card" data-card-width="320px" data-card-preview="1"><a href="https://www.reddit.com/r/polandball/comments/'+id+'/"></a></blockquote>';
					}
				}
			}
		}
	}


</script>
</head>
<body onload="init()">

<p id="title">r/polandball</p>
<input type="number" id="month" onchange="main()" value=1 step=1 min=1 max=12 style="width: 60;">
<input type="number" id="day" onchange="main()" value=1 step=1 min=1 max=31 style="width: 60;">

<div>
<p class="header">2011</p><hr><div id="2011"></div>
<p class="header">2012</p><hr><p id="2012"></div>
<p class="header">2013</p><hr><p id="2013"></div>
<p class="header">2014</p><hr><div id="2014"></div>
<p class="header">2015</p><hr><div id="2015"></div>
<p class="header">2016</p><hr><div id="2016"></div>
<p class="header">2017</p><hr><div id="2017"></div>
<p class="header">2018</p><hr><div id="2018"></div>
</div>


</body>
</html>
